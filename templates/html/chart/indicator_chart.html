{% extends 'html/base_indicator.html' %}
{% load static %}
{% block content %}

<!-- === ВЕРХНЯЯ ПАНЕЛЬ (заголовок + статусы) === -->
<div class="chart-header">
  <h2 class="chart-title">График</h2>

  <div class="ws-status-container">
    <div class="ws-status-item">
      <span class="ws-label">Свечи:</span>
      <span id="ws-status-kline" class="ws-dot gray"></span>
      <span id="ws-status-kline-text">—</span>
      <span id="ws-kline-last-update" class="ws-time"></span>
    </div>

    <div class="ws-status-item">
      <span class="ws-label">Сигналы:</span>
      <span id="ws-status-signals" class="ws-dot gray"></span>
      <span id="ws-status-signals-text">—</span>
      <span id="ws-signals-last-update" class="ws-time"></span>
    </div>
  </div>
</div>

<!-- === ФИЛЬТРЫ / НАСТРОЙКИ === -->
<div class="chart-controls">
  <div class="pair-select">
    <label>Пара:</label>
    <select id="pair-select">
      <option value="BTCUSDT" selected>BTC/USDT</option>
    </select>
  </div>

  <div class="interval-select">
    <label>Интервал:</label>
    <select id="interval-select">
      <option value="1" selected>1m</option>
      <option value="5">5m</option>
      <option value="15">15m</option>
      <option value="30">30m</option>
      <option value="60">1h</option>
    </select>
  </div>

  <div class="indicators-select">
    <label>Индикации:</label>
    <div class="dropdown">
      <button id="indicators-btn">Выбрать ▾</button>
      <div id="indicators-menu" class="dropdown-content">
        <label><input type="checkbox" id="show-positions" /> Показывать позиции</label><br>
        <label><input type="checkbox" id="show-rsi" /> Показать RSI</label>
        <label><input type="checkbox" id="show-stochrsi" /> Показать StochRSI</label>
      </div>
    </div>
  </div>

  <div class="reset-container">
    <button id="reset-settings">Сбросить настройки</button>
  </div>
</div>

<!-- === КОНТЕЙНЕР ГРАФИКА === -->
<div class="chart-wrapper">
  <div id="chart-container" class="chart-container"></div>
  <div id="chart-info"></div>
</div>

<!-- === СКРИПТЫ === -->
<script src="https://unpkg.com/lightweight-charts@4.1.0/dist/lightweight-charts.standalone.production.js"></script>
<script type="module" src="{% static 'js/chart/indicator_chart.js' %}"></script>


{% endblock %}
