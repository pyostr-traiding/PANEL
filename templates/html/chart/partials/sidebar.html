{% load static %}
<aside class="sidebar">
  <div class="sidebar__brand">
    <a href="/" class="brand-link">
      <img src="{% static 'images/logo.svg' %}" alt="logo" class="brand-logo">
      <span class="brand-text">Trading Panel</span>
    </a>
  </div>

  <nav class="sidebar__nav">
    <a href="{% url 'indicator_chart' %}"
       class="nav-item {% if '/chart/' in path %}active{% endif %}"
       title="–ì–ª–∞–≤–Ω–∞—è">
      <i data-lucide="activity" class="nav-icon"></i>
      <span class="nav-label">–ì–ª–∞–≤–Ω–∞—è</span>
    </a>

    <a href="{% url 'indicator_data' %}"
       class="nav-item {% if '/data/' in path or '/rsi/' in path or '/candles/' in path %}active{% endif %}"
       title="–î–∞–Ω–Ω—ã–µ">
      <i data-lucide="database" class="nav-icon"></i>
      <span class="nav-label">–î–∞–Ω–Ω—ã–µ</span>
    </a>
  </nav>

  <div class="sidebar__bottom">
    <button id="theme-toggle" class="nav-item" title="–¢–µ–º–∞">
      <i data-lucide="sun-moon" class="nav-icon"></i>
      <span class="nav-label">–¢–µ–º–∞</span>
    </button>

    <a href="/" class="nav-item back-btn-sidebar" title="–ù–∞–∑–∞–¥ –≤ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å">
      <i data-lucide="arrow-left" class="nav-icon"></i>
      <span class="nav-label">–ù–∞–∑–∞–¥ –≤ –∞–¥–º–∏–Ω–∫—É</span>
    </a>
  </div>
</aside>

<script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    if (window.lucide) lucide.createIcons();

    // üí° –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–º—É –∏–∑ localStorage –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    const saved = localStorage.getItem('theme');
    if (saved) {
      document.documentElement.dataset.theme = saved;
    }

    document.getElementById('theme-toggle')?.addEventListener('click', () => {
      const html = document.documentElement;
      const next = html.dataset.theme === 'dark' ? 'light' : 'dark';
      html.dataset.theme = next;
      localStorage.setItem('theme', next);

      // üí• –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–±—ã—Ç–∏–µ, —á—Ç–æ–±—ã –≥—Ä–∞—Ñ–∏–∫ –∏ –¥—Ä—É–≥–∏–µ –º–æ–¥—É–ª–∏ –º–æ–≥–ª–∏ –æ—Ç—Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å
      window.dispatchEvent(new CustomEvent('themeChanged', { detail: next }));
    });
  });
</script>
