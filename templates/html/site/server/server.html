{% extends 'html/site/base_app.html' %}
{% load static %}

{% block title %}–°–µ—Ä–≤–∏—Å—ã (Docker){% endblock %}

{% block head_extra %}
  <link rel="stylesheet" href="{% static 'css/site/server/server.css' %}">
{% endblock %}

{% block content %}
<div id="toast-container" class="toast-container"></div>

  <!-- ‚ñë‚ñë‚ñë –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å: –∑–∞–≥–æ–ª–æ–≤–æ–∫ + –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–æ–∫–µ—Ç–∞ ‚ñë‚ñë‚ñë -->
  <div class="srv-header">
    <div class="srv-title">
      <span class="srv-title-text">–†–∞–±–æ—á–∏–µ —Å–µ—Ä–≤–∏—Å—ã</span>
      <small class="srv-subtitle">–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, —Ä–µ—Å—É—Ä—Å—ã, –ª–æ–≥–∏</small>
    </div>
    <div class="ws-indicator">
      <span id="ws-dot" class="ws-dot red"></span>
      <span id="ws-status" class="ws-status">–ù–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è</span>
    </div>
  </div>

  <!-- ‚ñë‚ñë‚ñë –ö–∞—Ä—Ç–æ—á–∫–∏ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ ‚ñë‚ñë‚ñë -->
  <section class="srv-section">
    <div class="srv-cards" id="system-cards">
      <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –∏–∑ JS -->
      <div class="card skeleton">
        <div class="card-top">
          <span>CPU</span>
          <span class="pill muted">‚Äî</span>
        </div>
        <div class="card-val">‚Äî</div>
        <div class="card-bar"><span style="width:0%"></span></div>
        <div class="card-foot">–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞</div>
      </div>

      <div class="card skeleton">
        <div class="card-top">
          <span>–ü–∞–º—è—Ç—å</span>
          <span class="pill muted">‚Äî</span>
        </div>
        <div class="card-val">‚Äî</div>
        <div class="card-bar"><span style="width:0%"></span></div>
        <div class="card-foot">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –û–ó–£</div>
      </div>

      <div class="card skeleton">
        <div class="card-top">
          <span>–î–∏—Å–∫</span>
          <span class="pill muted">‚Äî</span>
        </div>
        <div class="card-val">‚Äî</div>
        <div class="card-bar"><span style="width:0%"></span></div>
        <div class="card-foot">–ó–∞–ø–æ–ª–Ω–µ–Ω–æ –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞</div>
      </div>
    </div>
  </section>

  <!-- ‚ñë‚ñë‚ñë –ü–ª–∏—Ç–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ ‚ñë‚ñë‚ñë -->
  <section class="srv-section">
    <div class="srv-grid-head">
      <div class="grid-title">–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã</div>
      <div class="grid-actions">
        <button id="btn-refresh" class="btn ghost" title="–û–±–Ω–æ–≤–∏—Ç—å —Å–µ–π—á–∞—Å">‚Üª</button>
        <span id="containers-count" class="muted">‚Äî</span>
      </div>
    </div>
    <div id="containers-grid" class="srv-cards srv-cards--containers">
      <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –∏–∑ JS -->
      <div class="empty muted">–ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤‚Ä¶</div>
    </div>
  </section>

  {% include 'html/site/server/modals.html' %}

<script>
  (function() {
    const token = "{{ access_token|escapejs }}";
    const saved = localStorage.getItem('access_token');

    // –µ—Å–ª–∏ —Ç–æ–∫–µ–Ω –∏–∑–º–µ–Ω–∏–ª—Å—è ‚Äî –æ–±–Ω–æ–≤–ª—è–µ–º
    if (token && token !== saved) {
      localStorage.setItem('access_token', token);
      console.log("üîë Access token –æ–±–Ω–æ–≤–ª—ë–Ω –≤ localStorage");
    }
  })();
</script>
  <!-- ‚ñë‚ñë‚ñë –°–∫—Ä–∏–ø—Ç—ã (–º–æ–¥—É–ª–∏) ‚ñë‚ñë‚ñë -->
  <script src="{% static 'js/site/server/utils.js' %}"></script>
  <script src="{% static 'js/site/server/state.js' %}"></script>
  <script src="{% static 'js/site/server/ui.js' %}"></script>
  <script src="{% static 'js/site/server/render.js' %}"></script>
  <script src="{% static 'js/site/server/api.js' %}"></script>
  <script src="{% static 'js/site/server/main.js' %}"></script>
    <script src="{% static 'js/site/server/toast.js' %}"></script>

{% endblock %}
