{% extends 'html/site/base_app.html' %}
{% load static %}

{% block title %}GPT Чаты{% endblock %}

{% block head_extra %}
  <link rel="stylesheet" href="{% static 'css/site/GPT/gpt.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/11.1.1/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

{% endblock %}

{% block content %}

  <!-- Верхняя панель -->
  <div class="gpt-header">
  <div class="gpt-title">GPT чаты</div>

  <!-- Выбор модели -->
  <select id="gpt-model-select" class="gpt-model-select">
    <option value="">Загрузка моделей...</option>
  </select>

  <div class="ws-status-container">
    <div id="ws-dot" class="ws-dot red"></div>
    <div id="ws-status-text" class="ws-status-text">Нет соединения</div>
  </div>
</div>

  <!-- Основной лейаут -->
  <div class="gpt-layout">
    <!-- Список чатов -->
    <aside class="chat-sidebar">

        <div class="chat-sidebar-header">
      <div class="chat-sidebar-title">Чаты</div>
            <div class="chat-filter">
              <select id="chat-filter-select">
                  <option value="all">Все</option>
                  <option value="user_chat">user_chat</option>
                  <option value="trend_analysis">trend_analysis</option>
                  <option value="global_analysis">global_analysis</option>
              </select>
            </div>
  <button id="chat-new-btn" class="chat-new-btn">+ Новый чат</button>
</div>


      <div id="chat-list" class="chat-list"></div>

      <div id="chat-list-footer" class="chat-list-footer">
        <span id="chat-list-loader" class="loader hidden"></span>
        <span id="chat-list-end" class="muted hidden">Больше чатов нет</span>
        <span id="chat-list-error" class="error hidden">Ошибка загрузки</span>
      </div>
    </aside>

    <!-- Окно чата -->
    <main class="chat-main">
      <div class="chat-window" id="chat-window">
        <div class="empty-state" id="empty-state">Выберите чат слева, чтобы посмотреть диалог.</div>
      </div>

      <!-- Панель ввода -->
      <form id="chat-input-form" class="chat-input-form">
        <textarea
          id="chat-input"
          class="chat-input"
          placeholder="Введите сообщение..."
          rows="1"
        ></textarea>
        <button type="submit" id="chat-send-btn" class="chat-send-btn">➤</button>
      </form>
    </main>
  </div>

  <script src="{% static 'js/site/GPT/gpt.js' %}"></script>
{% endblock %}
